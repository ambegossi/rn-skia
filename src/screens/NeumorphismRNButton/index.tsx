import {
  Canvas,
  Fill,
  Path,
  runTiming,
  useTouchHandler,
  useValue,
  Group,
  useComputedValue,
  mix,
} from '@shopify/react-native-skia';
import { Dimensions } from 'react-native';
import NeumorphismButton from '../../components/NeumorphismButton';

const { width } = Dimensions.get('window');
const PADDING = 32;
const size = width - PADDING * 2;
const x = PADDING;
const y = 75;

function NeumorphismRNButton() {
  const pressed = useValue(0);
  const onTouch = useTouchHandler({
    onStart: () => {
      runTiming(pressed, 1, { duration: 150 });
    },
    onEnd: () => {
      runTiming(pressed, 0, { duration: 150 });
    },
  });

  const transform = useComputedValue(
    () => [
      { translateX: 3.5 }, // (24 (button width) - 17 (svg width)) / 2 = 3.5
      { translateY: 4.5 }, // (24 (button height) - 15 (svg height)) / 2 = 4.5
      { scale: mix(pressed.current, 1, 0.95) },
    ],
    [pressed],
  );

  return (
    <Canvas style={{ flex: 1 }} onTouch={onTouch}>
      <Fill color="#F0F0F3" />

      <NeumorphismButton x={x} y={y} size={size} pressed={pressed}>
        <Group transform={transform}>
          <Path
            style="fill"
            color="#61DAFB"
            path="M16.3461 7.2801C16.3461 6.19725 14.99 5.17104 12.9109 4.53465C13.3907 2.41559 13.1775 0.729676 12.2379 0.189916C12.0213 0.0633051 11.7681 0.0033318 11.4916 0.0033318V0.746335C11.6448 0.746335 11.7681 0.776322 11.8714 0.832964C12.3245 1.09285 12.5211 2.08241 12.3678 3.35518C12.3312 3.66837 12.2712 3.99823 12.1979 4.33474C11.5449 4.17481 10.8319 4.05154 10.0822 3.97157C9.63239 3.35518 9.16593 2.79543 8.69614 2.30564C9.78233 1.29609 10.8019 0.743004 11.4949 0.743004V0C10.5786 0 9.37917 0.653044 8.16638 1.78587C6.95358 0.659707 5.75411 0.0133275 4.83785 0.0133275V0.756331C5.52755 0.756331 6.55043 1.30609 7.63661 2.30898C7.17015 2.79876 6.70369 3.35518 6.26056 3.97157C5.50756 4.05154 4.79454 4.17481 4.1415 4.33807C4.06486 4.00489 4.00822 3.6817 3.96824 3.37184C3.81164 2.09907 4.00489 1.10951 4.45469 0.846291C4.55465 0.786318 4.68459 0.759663 4.83785 0.759663V0.0166593C4.55798 0.0166593 4.30476 0.0766326 4.08485 0.203243C3.1486 0.743004 2.9387 2.42559 3.42181 4.53799C1.3494 5.1777 0 6.20058 0 7.2801C0 8.36295 1.35606 9.38917 3.43514 10.0256C2.95536 12.1446 3.16859 13.8305 4.10818 14.3703C4.32475 14.4969 4.57797 14.5569 4.85784 14.5569C5.7741 14.5569 6.97357 13.9038 8.18637 12.771C9.39916 13.8972 10.5986 14.5435 11.5149 14.5435C11.7948 14.5435 12.048 14.4836 12.2679 14.357C13.2041 13.8172 13.414 12.1346 12.9309 10.0222C14.9967 9.38583 16.3461 8.35962 16.3461 7.2801V7.2801ZM12.008 5.05776C11.8847 5.48756 11.7315 5.9307 11.5582 6.37384C11.4216 6.10729 11.2783 5.84074 11.1217 5.57419C10.9685 5.30764 10.8052 5.04776 10.6419 4.79454C11.1151 4.86451 11.5715 4.95114 12.008 5.05776ZM10.482 8.60618C10.2221 9.05598 9.95558 9.48246 9.67904 9.87895C9.18259 9.92226 8.67948 9.94559 8.17304 9.94559C7.66993 9.94559 7.16682 9.92226 6.67371 9.88228C6.39716 9.48579 6.12728 9.06264 5.8674 8.61618C5.61418 8.1797 5.38428 7.73657 5.17437 7.2901C5.38095 6.84363 5.61418 6.39716 5.86407 5.96069C6.12395 5.51089 6.3905 5.08441 6.66704 4.68792C7.16349 4.64461 7.6666 4.62128 8.17304 4.62128C8.67615 4.62128 9.17926 4.64461 9.67237 4.68459C9.94892 5.08108 10.2188 5.50422 10.4787 5.95069C10.7319 6.38717 10.9618 6.8303 11.1717 7.27677C10.9618 7.72324 10.7319 8.16971 10.482 8.60618ZM11.5582 8.17304C11.7381 8.61951 11.8914 9.06598 12.018 9.49912C11.5815 9.60574 11.1217 9.6957 10.6453 9.76567C10.8085 9.50911 10.9718 9.2459 11.1251 8.97602C11.2783 8.70947 11.4216 8.43959 11.5582 8.17304ZM8.1797 11.7281C7.86984 11.4083 7.55998 11.0518 7.25345 10.6619C7.55332 10.6753 7.85985 10.6853 8.16971 10.6853C8.4829 10.6853 8.79277 10.6786 9.09596 10.6619C8.7961 11.0518 8.48624 11.4083 8.1797 11.7281ZM5.7008 9.76567C5.22768 9.6957 4.77122 9.60907 4.33474 9.50245C4.45802 9.07264 4.61129 8.6295 4.78454 8.18637C4.92115 8.45292 5.06442 8.71946 5.22102 8.98601C5.37761 9.25256 5.53754 9.51244 5.7008 9.76567ZM8.16305 2.83208C8.47291 3.15193 8.78277 3.50844 9.0893 3.89827C8.78943 3.88494 8.4829 3.87495 8.17304 3.87495C7.85985 3.87495 7.54998 3.88161 7.24679 3.89827C7.54665 3.50844 7.85651 3.15193 8.16305 2.83208ZM5.69747 4.79454C5.53421 5.05109 5.37095 5.31431 5.21768 5.58419C5.06442 5.85074 4.92115 6.11729 4.78454 6.38383C4.60462 5.93737 4.45136 5.4909 4.32475 5.05776C4.76122 4.95447 5.22102 4.86451 5.69747 4.79454V4.79454ZM2.68214 8.96602C1.50267 8.46291 0.739672 7.8032 0.739672 7.2801C0.739672 6.757 1.50267 6.09396 2.68214 5.59418C2.96868 5.4709 3.28188 5.36095 3.60507 5.25767C3.79498 5.91071 4.04487 6.59041 4.35473 7.28677C4.0482 7.97979 3.80165 8.65616 3.61506 9.30587C3.28521 9.20258 2.97202 9.0893 2.68214 8.96602ZM4.47468 13.7272C4.02155 13.4674 3.82497 12.4778 3.97824 11.205C4.01489 10.8918 4.07486 10.562 4.14816 10.2255C4.8012 10.3854 5.51422 10.5087 6.26389 10.5886C6.71369 11.205 7.18015 11.7648 7.64994 12.2546C6.56375 13.2641 5.54421 13.8172 4.85118 13.8172C4.70125 13.8139 4.57464 13.7839 4.47468 13.7272V13.7272ZM12.3778 11.1884C12.5344 12.4611 12.3412 13.4507 11.8914 13.7139C11.7914 13.7739 11.6615 13.8005 11.5082 13.8005C10.8185 13.8005 9.79565 13.2508 8.70947 12.2479C9.17593 11.7581 9.64239 11.2017 10.0855 10.5853C10.8385 10.5053 11.5515 10.3821 12.2046 10.2188C12.2812 10.5553 12.3412 10.8785 12.3778 11.1884V11.1884ZM13.6606 8.96602C13.3741 9.0893 13.0609 9.19925 12.7377 9.30254C12.5478 8.64949 12.2979 7.9698 11.988 7.27344C12.2945 6.58041 12.5411 5.90405 12.7277 5.25433C13.0575 5.35762 13.3707 5.4709 13.6639 5.59418C14.8434 6.09729 15.6064 6.757 15.6064 7.2801C15.6031 7.8032 14.8401 8.46624 13.6606 8.96602V8.96602Z"
          />
          <Path
            style="fill"
            color="#61DAFB"
            path="M8.16969 8.80276C9.01063 8.80276 9.69235 8.12104 9.69235 7.2801C9.69235 6.43916 9.01063 5.75745 8.16969 5.75745C7.32875 5.75745 6.64703 6.43916 6.64703 7.2801C6.64703 8.12104 7.32875 8.80276 8.16969 8.80276Z"
          />
        </Group>
      </NeumorphismButton>
    </Canvas>
  );
}

export default NeumorphismRNButton;
